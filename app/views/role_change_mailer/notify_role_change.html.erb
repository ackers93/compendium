<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
      }
      .container {
        background-color: #f9f9f9;
        border-radius: 8px;
        padding: 30px;
        border: 1px solid #e0e0e0;
      }
      .role-change-box {
        background-color: #fff;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        border-left: 4px solid #3498db;
      }
      .role-display {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 15px 0;
        padding: 15px;
        background-color: #f8f9fa;
        border-radius: 6px;
      }
      .role-badge {
        display: inline-block;
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 14px;
        text-transform: capitalize;
      }
      .role-badge.viewer {
        background-color: #e3f2fd;
        color: #1976d2;
      }
      .role-badge.contributor {
        background-color: #e8f5e9;
        color: #388e3c;
      }
      .role-badge.admin {
        background-color: #f3e5f5;
        color: #7b1fa2;
      }
      .arrow {
        font-size: 24px;
        color: #666;
        margin: 0 15px;
      }
      .info-box {
        background-color: #e8f4f8;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin: 20px 0;
      }
      .permissions-list {
        list-style: none;
        padding: 0;
        margin: 15px 0;
      }
      .permissions-list li {
        padding: 8px 0;
        border-bottom: 1px solid #e0e0e0;
      }
      .permissions-list li:last-child {
        border-bottom: none;
      }
      .permissions-list li:before {
        content: "✓ ";
        color: #28a745;
        font-weight: bold;
        margin-right: 8px;
      }
      .footer {
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #e0e0e0;
        font-size: 12px;
        color: #777;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>Your Role Has Been Changed</h2>
      
      <p>Hello <%= @user.email %>!</p>
      
      <p>Your account role on Christadelphian Compendium has been updated by an administrator<% if @changed_by_admin.present? %> (<%= @changed_by_admin %>)<% end %>.</p>
      
      <div class="role-change-box">
        <h3 style="margin-top: 0;">Role Change</h3>
        <div class="role-display">
          <span class="role-badge <%= @old_role %>"><%= @old_role.titleize %></span>
          <span class="arrow">→</span>
          <span class="role-badge <%= @new_role %>"><%= @new_role.titleize %></span>
        </div>
      </div>
      
      <div class="info-box">
        <strong>Your New Permissions:</strong>
        <ul class="permissions-list">
          <% if @new_role == 'viewer' %>
            <li>View all content (notes, Bible verses, comments, cross-references)</li>
            <li>Read-only access</li>
          <% elsif @new_role == 'contributor' %>
            <li>View all content</li>
            <li>Create new notes</li>
            <li>Edit and delete your own notes</li>
            <li>Add comments on any content</li>
            <li>Edit and delete your own comments</li>
            <li>Add cross-references</li>
            <li>Edit and delete your own cross-references</li>
          <% elsif @new_role == 'admin' %>
            <li>All Contributor permissions</li>
            <li>Edit and delete ANY user's content</li>
            <li>Access to Admin Dashboard</li>
            <li>Manage user roles</li>
            <li>Delete users</li>
          <% end %>
        </ul>
      </div>
      
      <p>If you have any questions about your new role or permissions, please contact an administrator.</p>
      
      <div class="footer">
        <p>This is an automated message from Christadelphian Compendium. Please do not reply to this email.</p>
      </div>
    </div>
  </body>
</html>
