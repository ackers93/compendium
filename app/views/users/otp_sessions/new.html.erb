<div class="page-header">
  <div class="text-center">
    <div class="icon-container mb-4">
      <i class="fa-solid fa-shield-halved text-4xl text-primary"></i>
    </div>
    <h1 class="page-title">Two-Factor Authentication</h1>
    <p class="page-subtitle">We've sent a verification code to your email</p>
  </div>
</div>

<div class="content-section">
  <div class="section-header">
    <h2 class="section-title">Enter Verification Code</h2>
  </div>
  
  <div class="section-content">
    <div class="form-container">
      <div class="alert alert-info mb-6" role="alert">
        <i class="fa-solid fa-info-circle mr-2"></i>
        A 6-digit verification code has been sent to <strong><%= current_user.email %></strong>. 
        The code will expire in 10 minutes.
      </div>

      <%= form_with url: users_otp_verify_path, method: :post, html: {class: 'space-y-6', data: {turbo: false}} do |f| %>
        <div class="form-group">
          <%= label_tag :otp_code, "Verification Code", class: "form-label" %>
          <%= text_field_tag :otp_code, nil, 
              autofocus: true, 
              autocomplete: "off",
              placeholder: "Enter 6-digit code",
              maxlength: 6,
              pattern: "[0-9]{6}",
              class: "form-control text-center text-2xl tracking-widest",
              style: "letter-spacing: 0.5em;" %>
          <p class="form-help-text mt-2">
            <i class="fa-solid fa-clock mr-1"></i>
            Enter the 6-digit code from your email
          </p>
        </div>

        <div class="form-actions">
          <%= f.submit "Verify Code", class: "btn btn-primary w-full" %>
        </div>
      <% end %>
      
      <div class="auth-links mt-6 text-center">
        <p class="text-gray-600 mb-3">Didn't receive the code?</p>
        <%= button_to "Resend Code", 
            users_otp_resend_path, 
            method: :post,
            class: "btn btn-outline w-full",
            data: { turbo: false } %>
        
        <div class="mt-4">
          <%= link_to "Sign Out", destroy_user_session_path, 
              method: :delete,
              class: "text-sm text-gray-500 hover:text-gray-700",
              data: { turbo: false } %>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .alert {
    padding: 1rem;
    border-radius: 0.5rem;
    border: 1px solid;
  }
  
  .alert-info {
    background-color: #e7f3ff;
    border-color: #b3d9ff;
    color: #004085;
  }
</style>

