<div class="cross-reference-form">
  <% if local_assigns[:error] %>
    <div class="alert alert-error mb-4">
      <%= error %>
    </div>
  <% end %>
  
  <% 
    # Get the variables from either locals or instance variables
    book = local_assigns[:book] || @book
    chapter = local_assigns[:chapter] || @chapter
    verse = local_assigns[:verse] || @verse
  %>
  
  <%= form_with url: bible_verse_cross_references_path(source_book: book, source_chapter: chapter, source_verse: verse), 
                data: { turbo: true }, 
                class: "space-y-4",
                id: "cross-reference-form" do |form| %>
    
    <div class="form-group">
      <label for="book" class="form-label">Book</label>
      <select name="book" id="book" class="form-select" required>
        <option value="">Select a book...</option>
        <optgroup label="Old Testament">
          <% BibleVersesController::OLD_TESTAMENT_BOOKS.each do |book_option| %>
            <option value="<%= book_option %>"><%= book_option %></option>
          <% end %>
        </optgroup>
        <optgroup label="New Testament">
          <% BibleVersesController::NEW_TESTAMENT_BOOKS.each do |book_option| %>
            <option value="<%= book_option %>"><%= book_option %></option>
          <% end %>
        </optgroup>
      </select>
    </div>
    
    <div class="form-group">
      <label for="chapter" class="form-label">Chapter</label>
      <input type="number" name="chapter" id="chapter" class="form-input" min="1" required>
    </div>
    
    <div class="form-group">
      <label for="verse" class="form-label">Verse</label>
      <input type="number" name="verse" id="verse" class="form-input" min="1" required>
    </div>
    
    <div class="form-group">
      <label for="comment_content" class="form-label">Comment (Optional)</label>
      <textarea name="comment[content]" id="comment_content" class="form-textarea" rows="3" 
                placeholder="Explain how these verses are connected..."></textarea>
    </div>
  <% end %>
</div> 